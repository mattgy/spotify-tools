🧪 Matt Y's Spotify Tools - Comprehensive Test Suite
============================================================
Checking dependencies...
Installing dependencies for testing...
Using virtual environment: /Users/mgy/src/spotify-tools/venv/bin/python
✅ Dependencies installed successfully
Testing module imports...
==================================================
✅ spotify_tools
✅ spotify_follow_artists
✅ spotify_like_songs
✅ spotify_similar_artists
✅ spotify_backup
✅ spotify_cleanup_artists
✅ spotify_remove_christmas
✅ spotify_identify_skipped
✅ spotify_playlist_manager
✅ spotify_playlist_converter
✅ spotify_playlist_size_manager
✅ cache_utils
✅ credentials_manager
✅ constants
✅ spotify_utils
✅ tqdm_utils

==================================================
Import Results: 16/16 successful

Testing script functions...
==================================================
✅ spotify_tools: all required functions present
✅ spotify_follow_artists: all required functions present
✅ spotify_like_songs: all required functions present
✅ spotify_similar_artists: all required functions present
✅ spotify_backup: all required functions present
✅ spotify_cleanup_artists: all required functions present
✅ spotify_remove_christmas: all required functions present
✅ spotify_identify_skipped: all required functions present
✅ spotify_playlist_manager: all required functions present
✅ spotify_playlist_converter: all required functions present
✅ spotify_playlist_size_manager: all required functions present

Running unit tests...
==================================================
✅ Loaded all test modules
test_cache_expiration (test_cache_utils.TestCacheUtils.test_cache_expiration)
Test that expired cache returns None. ... ok
test_clear_all_caches (test_cache_utils.TestCacheUtils.test_clear_all_caches)
Test clearing all cache files. ... Cleared 2 cache files
ok
test_clear_specific_cache (test_cache_utils.TestCacheUtils.test_clear_specific_cache)
Test clearing a specific cache file. ... Cleared cache: clear_test
ok
test_get_cache_info (test_cache_utils.TestCacheUtils.test_get_cache_info)
Test cache information retrieval. ... ok
test_list_caches (test_cache_utils.TestCacheUtils.test_list_caches)
Test listing cache files. ... ok
test_nonexistent_cache (test_cache_utils.TestCacheUtils.test_nonexistent_cache)
Test loading non-existent cache returns None. ... ok
test_save_and_load_cache (test_cache_utils.TestCacheUtils.test_save_and_load_cache)
Test basic save and load functionality. ... ok
test_config_directory_structure (test_comprehensive_menu.TestConfigurationManagement.test_config_directory_structure)
Test that expected config directory structure can be created. ... ok
test_constants_module (test_comprehensive_menu.TestCoreModules.test_constants_module)
Test that constants module loads and has required constants. ... ok
test_credentials_manager_basic_functions (test_comprehensive_menu.TestCoreModules.test_credentials_manager_basic_functions)
Test basic credential manager functionality. ... ok
test_main_tools_functions (test_comprehensive_menu.TestMenuFunctionality.test_main_tools_functions)
Test that main spotify_tools has required functions. ... ok
test_script_main_functions_exist (test_comprehensive_menu.TestMenuFunctionality.test_script_main_functions_exist)
Test that all menu scripts have main functions (without importing). ... ok
test_all_menu_scripts_exist (test_comprehensive_menu.TestMenuStructure.test_all_menu_scripts_exist)
Test that all scripts referenced in the main menu exist. ... ok
test_script_syntax_validation (test_comprehensive_menu.TestMenuStructure.test_script_syntax_validation)
Test that all Python scripts have valid syntax. ... ok
test_cache_utils_structure (test_comprehensive_menu.TestUtilityModules.test_cache_utils_structure)
Test cache utils has expected functions (without executing). ... ok
test_tqdm_utils_structure (test_comprehensive_menu.TestUtilityModules.test_tqdm_utils_structure)
Test tqdm utils has expected functions (without executing). ... ok
test_credentials_file_priority_over_env (test_credentials_manager.TestCredentialsManager.test_credentials_file_priority_over_env)
Test that credentials file takes priority over environment variables. ... ok
test_credentials_file_secure_permissions (test_credentials_manager.TestCredentialsManager.test_credentials_file_secure_permissions)
Test that credentials file is created with secure permissions. ... Spotify API credentials not found.
Please enter your Spotify API credentials:
ok
test_get_lastfm_api_key_from_env (test_credentials_manager.TestCredentialsManager.test_get_lastfm_api_key_from_env)
Test getting Last.fm API key from environment variables. ... ok
test_get_lastfm_api_key_missing (test_credentials_manager.TestCredentialsManager.test_get_lastfm_api_key_missing)
Test behavior when Last.fm API key is missing. ... Last.fm API key not found.
Please enter your Last.fm API key:
API Key: 🐍 Running tests in virtual environment: /Users/mgy/src/spotify-tools/venv/bin/python
